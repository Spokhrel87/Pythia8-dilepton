# Pythia8-dilepton

This packages is designed to perform GEN-only private MC productions using the CMSSW Pythia8 release that is included in the working CMSSW release. It also includes basic TTree-making files and simplistic histogramming that is intended primarly as a starting point to springboard to do whatever specific plotting is desired.

# Soon-to-be Outdated CMSSW_8_0_21 Instuctions (Valid for 2016 running)

First create a clean CMSSW_8_0_21 release area:
```
cmsrel CMSSW_8_0_21
cd CMSSW_8_0_21/src
cmsenv
```

Next clone the Pythia8 repository here

```
git clone -b cmssw8021 https://github.com/szaleski/Pythia8-dilepton.git GenStudy
cd GenStudy
```

Next use scram to build and compile the project
```
scram b -j 8

```

If there are compiler errors, rsolve these (should be minor, if any).
Upon successful build change to test directory and try running the genrator executable using cmsRun.
This creates a lot screen output and can be time consuming to run so we redirect the output into a .txt file using '>' and run both functions in the background using '&'
It does take command line input. Every option has a default value except for maxEvents...which defaults to infity!
YOU MUST ASSIGN A VALUE TO THIS VARIABLE EVERY TIME!!!
If you forget, simply kill the process with "Ctrl+C"

```
cd Dimuon/test

cmsRun ciCrossSecCalc_edm_cfg.py maxEvents=50000 minMass=300 maxMass=800 Lambda=10000 helicityLL=-1 ciGen=1 ULE=off pdgId=11 &> outFile.txt &
```

This creates an output ROOT file that is labeled by most of the input parameters. This file has all of the RAW event MC info. It is meant to be analysed using Dilepton_cfg.py
which is our TTree maker (or EDAnalyzer in CMS language). It takes an input .root file from GEN production with the .root extension and also takes in a user created output file name WITHOUT the .root extension.
This also displays alot of screen output so we redirect and run in the background again.

```
cmsRun Dilepton_cfg.py inFile=<name of file created by generator> filename=<some output filename> &> AnalyzerOut.txt &
```
 
The output file has branches and histograms that can be used to quickly check to see if the values make sense.

These can be opened in a TBrowser in ROOT by doing the following:
```
root -l <some output filename>.root
[0]TBrowser b

```

If everything looks OK, it is likely that you would like to plot these histograms. 
We offer a basic histogramming and plotting script, makeHistograms.cc that provides simple access to the TTree variables and some basic ROOT plotting functionality.
It takes three input variables, inputfile name, particle type, and output file name.
To run this do


```
#for BASH shell
root -x -b -q makeHistograms.cc++(\"outputFile.root\",\"muon\",\"histogramOut\")

#for tcsh shell
root -x -b -q makeHistograms.cc++\(\"outputFile.root\",\"electron\",\"histogramOut\"\)

```

Once this has run, it will have made an output ROOT file that has stored the histograms that can be either:
a) modified in the TBrowser
b) saved as a .C ROOT macro that can be modified that way

The .root file will also have all TCanvas objects saved inside it.
The TCanvas objects also get written out to .png file...if a different format is desired, 
this can easily be modified inside makeHistogram.cc in the SaveAs() function by changing  .png to .pdf, or some other desired extension.



# Outdated CMSSW_7_4_4 Instructions (Valid for 2015 running)
In order to check this out you should have checked out a CMSSW release.
It has been tested on CMSSW_7_4_4.
To checkout package, please do the following in the src directory:
``` 
git clone https://github.com/szaleski/Pythia8-dilepton.git GenStudy
```
or
    
```
git clone git@github.com:szaleski/Pythia8-dilepton.git GenStudy
```

After the package has been checked out you can run the Generator  dimuon_Pythia8_gen.py that resides in the test directory.
Running this generator creates a .root output file. Also, it is possible to specify optional parameters at the command line, specifically, the number of events to produce (maxEvents), minimum mass cut (minMass), maximum mass cut (maxMass), model type (model), and output file name (outName). Any of the specified parameters may be omitted from the command, and will revert to their default values found in the mcCommandLineOptions_cfi.py file in the python dirctory. These can be hardcoded into the generator file though if one wishes.

To run please do the following:
1) change to test directory

```   
cmsRun dimuon_Pythia8_gen.py maxEvents=<number of events> minMass=<low mass cut> maxMass=<high mass cut> model=<model name> outName="<file name>"
```
This creates a .root output file that can be analyzed using Dimuon_cfg.py. This cfg file analyzes the TTree generated by dimuon_Pythia8_gen.py.

To run this file please do the following:
```
cmsRun Dimuon_cfg.py
```

It creates histograms for the following quantities of Boson, and dimuon pairs: pT, mass, energy, pseudorapidity, phi, theta, and charge. It also compares values of theta and phi for the muon pairs.

Do not use Plots.cc, this was an earlier attempt of Plots2.cc
Plots2.cc can be used to generate different canvases to be analyzed in the .root output file created by Dimuon_cfg.py
